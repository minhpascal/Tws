<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:property-placeholder location="classpath:*.properties"/>

    <!--<bean id="defaultProperties" class="com.tws.message.DefaultProperties">-->
        <!--<property name="brokerList" value="${broker.list}"/>-->
        <!--<property name="serializerClass" value="${serializer.class}"/>-->
        <!--<property name="zookeeperConnect" value="${zookeeper.connect}"/>-->
    <!--</bean>-->


    <bean id="activemqConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
        <property name="brokerURL" value="${activemq.broker.url}"/>
        <property name="alwaysSessionAsync" value="true"/>
        <property name="dispatchAsync" value="true"/>
        <property name="copyMessageOnSend" value="false"/>
        <property name="sendAcksAsync" value="true"/>
        <property name="useAsyncSend" value="true"/>
        <property name="useCompression" value="true"/>
    </bean>

    <bean id="jmsConnectionFactory" class="org.apache.activemq.pool.PooledConnectionFactory"  destroy-method="stop">
        <property name="connectionFactory" ref="activemqConnectionFactory"/>
        <property name="maxConnections" value="10"/>
        <property name="createConnectionOnStartup" value="${activemq.create.connection.startup}"/>
        <property name="reconnectOnException" value="true"/>
    </bean>

    <!-- publish -->
    <bean id="jmsTemplate" class="org.springframework.jms.core.JmsTemplate">
        <property name="connectionFactory" ref="jmsConnectionFactory"/>
        <property name="pubSubDomain" value="true"/>
        <property name="deliveryPersistent" value="false"/>
        <property name="sessionTransacted" value="false"/>
    </bean>

    <!--<bean id="listenerContainer" class="org.springframework.jms.listener.DefaultMessageListenerContainer">-->
        <!--<property name="connectionFactory" ref="jmsConnectionFactory"/>-->
        <!--<property name="autoStartup" value="true"/>-->
        <!--<property name="pubSubDomain" value="true"/>-->
        <!--<property name="sessionTransacted" value="false"/>-->
        <!--<property name="destinationName" value="Tick"/>-->
        <!--<property name="messageListener">-->
            <!--<bean class="com.tws.activemq.MyMessageListener"/>-->
        <!--</property>-->
    <!--</bean>-->

    <!--<bean id="publisher" class="com.tws.activemq.ActivemqPublisher">-->
        <!--<property name="template" ref="jmsTemplate"/>-->
    <!--</bean>-->









    <!--<bean id="consumer" class="com.tws.message.KafkaConsumer">-->
        <!--<property name="defaultProperties" ref="defaultProperties"/>-->
        <!--<property name="messageListener" ref="testMessageListener"/>-->
    <!--</bean>-->

    <!--<bean id="testMessageListener" class="com.tws.TestMessageListener"/>-->

    <!--<bean id="producer" class="com.tws.message.KafkaProducer">-->
        <!--<property name="defaultProperties" ref="defaultProperties"/>-->
    <!--</bean>-->

    <bean id="publisher" class="com.tws.zeromq.ZeromqPublisher"/>

    <!--<bean id="subscriber" class="com.tws.zeromq.ZeromqSubscriber">-->
        <!--<property name="channel" value="HISTORY_CHANNEL"/>-->
        <!--<property name="host" value="127.0.0.1"/>-->
        <!--<property name="messageListener">-->
            <!--<bean class="com.tws.zeromq.MessageListenerImpl"/>-->
        <!--</property>-->
    <!--</bean>-->

</beans>